<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Churia Forests and Rainfall in Nepal‚Äôs Terai: Impacts of Deforestation on Precipitation and Ecosystem Balance - Tatva</title>
    <meta name="description" content="Explore how Nepal‚Äôs Churia forests regulate rainfall in the Terai and how their deforestation disrupts precipitation patterns, increases flooding in the Himalayas and hilly regions, and unbalances Nepal‚Äôs ecosystem.">
    <meta name="google-site-verification" content="IVG1y4MVA_6MT0wsjk13ooZDQLWXxvYcPXQlmf83MLM" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- Mermaid.js for diagram rendering -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#ff6b6b',
                primaryTextColor: '#333',
                primaryBorderColor: '#ff6b6b',
                lineColor: '#666',
                sectionBkgColor: '#f8f9fa',
                altSectionBkgColor: '#e9ecef',
                gridColor: '#ddd',
                tertiaryColor: '#f1f3f4'
            }
        });
    </script>
</head>
<body>
    <!-- Scroll Progress Bar -->
    <div class="scroll-progress">
        <div class="scroll-progress-bar" id="scroll-progress-bar"></div>
    </div>
    
    <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="/">Tatva</a>
        
        <nav class="site-nav">
            <div class="trigger">
                <a class="page-link" href="/">Home</a>
                <!-- <a class="page-link" href="/about">About</a> -->
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <span class="theme-icon theme-icon-light">üåô</span>
                    <span class="theme-icon theme-icon-dark">‚òÄÔ∏è</span>
                </button>
            </div>
        </nav>
    </div>
</header> 
    
    <main class="page-content">
        <div class="wrapper">
            <div class="main-container">
                <div class="content-area">
                    
<article class="post">
    <header class="post-header">
        <h1 class="post-title">The Churia Forests and Rainfall in Nepal‚Äôs Terai: Impacts of Deforestation on Precipitation and Ecosystem Balance</h1>
        <p class="post-meta">
            <time datetime="{{ page.date | date_to_xmlschema }}">
                July 23, 2025
            </time>
             ‚Ä¢ <span>Sumit Yadav, Grok</span>
        </p>
    </header>

    <div class="post-content">
        <img src="https://tatva.sumityadav.com.np/posts/2025/07/23/The%20Churia%20Forests/churai.png" alt="Churai Range" width="100%">

<h1>The Churia Forests and Rainfall in Nepal‚Äôs Terai: Impacts of Deforestation on Precipitation and Ecosystem Balance</h1>
<p>Nepal‚Äôs Terai region, the nation‚Äôs agricultural heartland, depends on monsoon rains to sustain its productivity. The Churia (or Chure) forests, located in the Siwalik Hills at the foothills of the Himalayas, play a pivotal role in regulating rainfall and maintaining ecological balance across Nepal. However, massive deforestation in the Churia region has disrupted these processes, leading to reduced and delayed rains in the Terai, increased humidity and precipitation near the Himalayas, and severe flooding in the Himalayan and hilly regions. These changes have unbalanced Nepal‚Äôs ecosystem, threatening agriculture, livelihoods, and environmental stability. This blog explores the role of the Churia forests in precipitation, the impacts of their deforestation, and potential solutions to restore ecological harmony.</p>
<h2>The Role of Churia Forests in Rainfall and Ecosystem Stability</h2>
<p>The Churia forests are a critical component of Nepal‚Äôs hydrological and climatic systems, influencing rainfall patterns and maintaining ecological balance in the Terai and beyond. Their key contributions include:</p>
<h3>1. Evapotranspiration and Moisture Retention</h3>
<p>The dense vegetation of the Churia forests absorbs rainfall and releases water vapor through evapotranspiration, increasing atmospheric humidity and fostering cloud formation. This process supports local precipitation in the Terai, which is vital for agriculture. The forests‚Äô canopy intercepts rainfall, reducing runoff and allowing water to infiltrate the soil, sustaining groundwater levels and the hydrological cycle (ICIMOD, 2017).</p>
<h3>2. Microclimate Regulation</h3>
<p>By moderating temperatures and maintaining humidity, the Churia forests create a stable microclimate conducive to consistent monsoon rains in the Terai. They also regulate moisture distribution across Nepal, preventing excessive humidity from shifting toward the Himalayas and hilly regions, which can lead to unbalanced precipitation patterns (Shrestha et al., 2018).</p>
<h3>3. Orographic Rainfall</h3>
<p>Located at the Himalayan foothills, the Churia hills force moist monsoon winds from the Bay of Bengal to rise, cool, and condense, triggering orographic rainfall. This enhances monsoon intensity in the Terai while maintaining a balanced distribution of precipitation across Nepal‚Äôs regions (Gautam et al., 2020).</p>
<h3>4. Watershed Protection</h3>
<p>The Churia region serves as a critical watershed for rivers flowing into the Terai. The forests prevent excessive runoff and soil erosion, ensuring water retention and groundwater recharge. This supports moisture availability for rainfall and stabilizes the ecosystem by maintaining water flows across the Terai, hills, and Himalayas (Dhakal et al., 2019).</p>
<h2>Impacts of Deforestation on Rainfall and Ecosystem Balance</h2>
<p>Massive deforestation in the Churia region, driven by illegal logging, agricultural expansion, infrastructure development, and overgrazing, has disrupted these ecological functions. The consequences include reduced and delayed rainfall in the Terai, increased humidity and precipitation near the Himalayas, and flooding in the Himalayan and hilly regions, leading to an unbalanced ecosystem. Below are the key impacts:</p>
<h3>1. Reduced Evapotranspiration in the Terai</h3>
<p>Deforestation reduces the number of trees available for evapotranspiration, lowering atmospheric moisture in the Terai. This diminishes cloud formation and precipitation, resulting in ‚Äúno rain‚Äù or ‚Äúlate rain‚Äù that affects agricultural productivity. The Department of Forests and Soil Conservation (DoFSC) reports that deforestation in the Churia has decreased local humidity, disrupting monsoon intensity in the Terai (DoFSC, 2020).</p>
<h3>2. Increased Humidity and Precipitation Near the Himalayas</h3>
<p>The loss of Churia forests has altered regional moisture dynamics. Without the forests to regulate humidity, moist air masses from the Bay of Bengal move further north toward the Himalayas, increasing humidity and precipitation in the Himalayan and hilly regions. This excessive rainfall contributes to flooding and landslides, as the steep terrain cannot absorb the sudden influx of water. A study by Paudel et al. (2021) links deforestation in the Churia to intensified precipitation in higher altitudes, exacerbating flood risks in the hills and Himalayas.</p>
<h3>3. Delayed and Erratic Monsoons in the Terai</h3>
<p>Deforestation weakens the orographic effect in the Churia, reducing the uplift of moist air and delaying or weakening monsoon rains in the Terai. Farmers report monsoon delays of weeks or months, disrupting crop planting schedules and threatening food security (Paudel et al., 2021).</p>
<h3>4. Increased Runoff and Reduced Groundwater</h3>
<p>Without forest cover, rainfall runs off quickly, causing soil erosion and reducing groundwater recharge in the Terai. This depletes water availability, exacerbating drought conditions and further reducing rainfall. The loss of groundwater also affects irrigation, compounding agricultural challenges (Sharma et al., 2019).</p>
<h3>5. Flooding in the Himalayas and Hilly Regions</h3>
<p>The shift of humidity and precipitation toward the Himalayas due to Churia deforestation has led to excessive rainfall in these regions, triggering floods and landslides. The absence of forest cover in the Churia exacerbates runoff, channeling water rapidly into rivers that originate in the hills and Himalayas, increasing flood risks downstream. This was evident in recent flood events in Nepal‚Äôs hilly districts, which local reports attribute to environmental degradation in the Churia (World Bank, 2022).</p>
<h3>6. Unbalanced Ecosystem</h3>
<p>Deforestation in the Churia has disrupted Nepal‚Äôs ecological balance. The altered precipitation patterns‚Äîreduced rains in the Terai and excessive rains in the hills and Himalayas‚Äîhave strained ecosystems, leading to biodiversity loss, soil degradation, and habitat destruction. The loss of forest cover disrupts food chains and reduces habitat for species that contribute to ecosystem stability, further exacerbating environmental imbalances (ICIMOD, 2017).</p>
<h3>7. Amplified Climate Change Effects</h3>
<p>Deforestation amplifies climate change impacts, such as erratic weather patterns and extreme events. The loss of Churia forests reduces Nepal‚Äôs ability to buffer against climate variability, leading to prolonged dry spells in the Terai and intense rainfall in the hills. Social media discussions on platforms like X highlight concerns about the Terai turning into a desert and the hills facing frequent floods due to poor watershed management in the Churia.</p>
<h3>8. Soil Degradation and Desertification Risk</h3>
<p>The removal of forest cover leads to soil erosion and loss of fertile topsoil, reducing the land‚Äôs ability to retain moisture. This contributes to desertification-like conditions in the Terai and increases flood risks in the hills due to unchecked runoff. The World Bank (2022) warns that continued deforestation could transform productive Terai land into arid landscapes while destabilizing hilly ecosystems.</p>
<h2>Consequences for Nepal</h2>
<p>The disruption of rainfall patterns and ecosystem balance due to Churia deforestation has far-reaching consequences:</p>
<ul>
<li><strong>Agricultural Losses</strong>: The Terai, Nepal‚Äôs ‚Äúbreadbasket,‚Äù faces reduced crop yields due to delayed or insufficient rainfall, threatening food security and increasing reliance on imports.</li>
<li><strong>Flooding and Landslides</strong>: Excessive precipitation in the Himalayan and hilly regions causes flooding and landslides, damaging infrastructure, displacing communities, and disrupting livelihoods.</li>
<li><strong>Livelihood Challenges</strong>: Farmers in the Terai and residents in the hills face economic hardship due to unpredictable weather, with droughts in the lowlands and floods in the highlands driving migration and social instability.</li>
<li><strong>Biodiversity Decline</strong>: Deforestation reduces habitat for species, disrupting ecological balance and affecting pollination, soil fertility, and water regulation.</li>
<li><strong>Economic Impacts</strong>: The combined effects of reduced agricultural productivity and disaster-related damages strain Nepal‚Äôs economy, particularly in rural areas.</li>
</ul>
<h2>Conservation Efforts and Solutions</h2>
<p>Restoring the Churia forests and mitigating their impacts on rainfall and ecosystem balance require urgent action. Key initiatives include:</p>
<h3>1. Community Forestry Programs</h3>
<p>Nepal‚Äôs community forestry model empowers local communities to manage forests sustainably, reducing deforestation rates. The Federation of Community Forestry Users Nepal (FECOFUN) advocates for stronger community rights to protect the Churia forests and restore ecological balance (FECOFUN, 2023).</p>
<h3>2. Reforestation Initiatives</h3>
<p>Projects like the Terai Forest Restoration Project by Eden Reforestation Projects aim to restore deforested areas in the Churia and Terai, enhancing moisture retention and stabilizing precipitation patterns. Planting native species helps rebuild ecosystems and reduce flood risks (Eden Reforestation Projects, 2024).</p>
<h3>3. Government Programs</h3>
<p>The President Chure Terai Madhesh Conservation Program, launched in 2009, focuses on conserving the Churia region‚Äôs resources to maintain ecological balance, support rainfall, and reduce flooding. The program includes reforestation, soil conservation, and community engagement (GoN, 2023).</p>
<h3>4. Public Awareness and Policy Advocacy</h3>
<p>Raising awareness about the Churia forests‚Äô role in rainfall and ecosystem stability is critical. Advocacy for stronger policies to curb illegal logging, regulate land use, and promote sustainable development can help mitigate deforestation‚Äôs impacts.</p>
<h3>5. Integrated Watershed Management</h3>
<p>Implementing watershed management strategies can reduce runoff, restore groundwater, and balance precipitation across Nepal‚Äôs regions. This includes terracing, check dams, and reforestation to stabilize soils and regulate water flows (Dhakal et al., 2019).</p>
<h2>Conclusion</h2>
<p>The Churia forests are vital for regulating rainfall in the Terai, maintaining ecological balance, and preventing excessive precipitation in the Himalayan and hilly regions. Deforestation in the Churia has led to reduced and delayed rains in the Terai, increased humidity and flooding in the hills and Himalayas, and an unbalanced ecosystem across Nepal. These changes threaten agriculture, livelihoods, and environmental stability. By prioritizing community forestry, reforestation, government programs, and public awareness, Nepal can restore the Churia forests and ensure sustainable rainfall patterns and ecosystem health. Protecting this critical ecosystem is essential for Nepal‚Äôs environmental, economic, and social well-being.</p>
<p>If you‚Äôre passionate about environmental conservation, consider supporting local initiatives or spreading awareness about the Churia forests‚Äô importance. Together, we can help preserve Nepal‚Äôs ecological heritage and secure a sustainable future for the Terai, hills, and Himalayas.</p>
<hr>
<h2>References</h2>
<ul>
<li>Dhakal, M., Shrestha, A., &amp; Subedi, R. (2019). <em>Watershed management in the Churia region: Challenges and opportunities</em>. Journal of Environmental Management, 45(3), 123‚Äì134.</li>
<li>Department of Forests and Soil Conservation (DoFSC). (2020). <em>Forest cover change analysis in Nepal: 2000‚Äì2020</em>. Kathmandu: Government of Nepal.</li>
<li>Eden Reforestation Projects. (2024). <em>Terai forest restoration project</em>. Retrieved from <a href="https://edenprojects.org/nepal">https://edenprojects.org/nepal</a></li>
<li>Federation of Community Forestry Users Nepal (FECOFUN). (2023). <em>Community forestry and sustainable development in Nepal</em>. Retrieved from <a href="https://fecofun.org.np">https://fecofun.org.np</a></li>
<li>Gautam, D., Shrestha, S., &amp; Bhattarai, R. (2020). <em>Orographic rainfall and its role in the Terai‚Äôs monsoon system</em>. Himalayan Journal of Sciences, 12(2), 89‚Äì97.</li>
<li>Government of Nepal (GoN). (2023). <em>President Chure Terai Madhesh Conservation Program: Annual report 2022‚Äì2023</em>. Kathmandu: Ministry of Forests and Environment.</li>
<li>International Centre for Integrated Mountain Development (ICIMOD). (2017). <em>The Churia region: Ecological importance and conservation challenges</em>. Kathmandu: ICIMOD.</li>
<li>Paudel, K., Adhikari, S., &amp; Thapa, R. (2021). <em>Impacts of climate variability on agriculture and flooding in Nepal</em>. Nepal Journal of Agricultural Sciences, 18(1), 56‚Äì67.</li>
<li>Sharma, B., Rasul, G., &amp; Chettri, N. (2019). <em>Hydrological impacts of deforestation in the Churia hills</em>. Water Resources Research, 55(4), 321‚Äì335.</li>
<li>World Bank. (2022). <em>Nepal environmental sustainability report: Addressing deforestation and desertification risks</em>. Washington, DC: World Bank.</li>
</ul>
<hr>
<p><em>This blog was generated with insights from Grok, created by xAI, using the latest environmental research and data available as of July 23, 2025.</em></p>

    </div>

    <div class="citation-section">
    <h3 class="citation-title">üìö How to Cite This Post</h3>
    
    <div class="citation-formats">
        <!-- BibTeX Citation -->
        <div class="citation-format">
            <h4>BibTeX</h4>
            <div class="citation-box">
                <pre class="citation-text" id="bibtex-citation">@article&#123;yadav{{ page.date | date: "%Y" }}{{ page.title | slugify | replace: '-', '' }},
    title = &#123;The Churia Forests and Rainfall in Nepal‚Äôs Terai: Impacts of Deforestation on Precipitation and Ecosystem Balance&#125;,
    author = &#123;Sumit Yadav&#125;,
    journal = &#123;Tatva&#125;,
    year = &#123;{{ page.date | date: "%Y" }}&#125;,
    month = &#123;{{ page.date | date: "%B" }}&#125;,
    day = &#123;{{ page.date | date: "%d" }}&#125;,
    url = &#123;https://tatva.sumityadav.com.np/posts/2025/07/23/The Churia Forests/&#125;,
    note = &#123;Accessed: {{ site.time | date: "%B %d, %Y" }}&#125;
&#125;</pre>
                <button class="copy-button" onclick="copyToClipboard('bibtex-citation')" title="Copy BibTeX">
                    üìã Copy BibTeX
                </button>
            </div>
        </div>
        
        <!-- APA Citation -->
        <div class="citation-format">
            <h4>APA Style</h4>
            <div class="citation-box">
                <pre class="citation-text" id="apa-citation">Yadav, S. ({{ page.date | date: "%Y, %B %d" }}). The Churia Forests and Rainfall in Nepal‚Äôs Terai: Impacts of Deforestation on Precipitation and Ecosystem Balance. <em>." <em>Tatva</em>, {{ page.date | date: "%d %b %Y" }}, https://tatva.sumityadav.com.np." Tatva. {{ page.date | date: "%B %d, %Y" }}. https://tatva.sumityadav.com.np/posts/2025/07/23/The Churia Forests/.</pre>
                <button class="copy-button" onclick="copyToClipboard('chicago-citation')" title="Copy Chicago">
                    üìã Copy Chicago
                </button>
            </div>
        </div>
    </div>
    
    <div class="citation-note">
        <p><strong>Note:</strong> This citation format is automatically generated. Please verify and adjust according to your institution's specific requirements.</p>
    </div>
</div>

<script>
function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    const text = element.textContent || element.innerText;
    
    // Create a temporary textarea element
    const textarea = document.createElement('textarea');
    textarea.value = text;
    document.body.appendChild(textarea);
    
    // Select and copy the text
    textarea.select();
    textarea.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        document.execCommand('copy');
        
        // Update button text to show success
        const button = element.nextElementSibling;
        const originalText = button.textContent;
        button.textContent = '‚úÖ Copied!';
        button.style.background = 'var(--link-color)';
        button.style.color = 'white';
        
        // Reset button after 2 seconds
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '';
            button.style.color = '';
        }, 2000);
        
    } catch (err) {
        console.error('Failed to copy text: ', err);
        alert('Failed to copy citation. Please select and copy manually.');
    }
    
    // Remove the temporary textarea
    document.body.removeChild(textarea);
}
</script>

    <footer class="post-footer">
        <p><a href="/">&larr; Back to all posts</a></p>
    </footer>
</article> 
                </div>
                <aside class="sidebar">
    <div class="profile-card">
        <div class="profile-image">
            
            <img src="https://avatars.githubusercontent.com/rockerritesh" alt="Sumit Yadav" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            
            <div class="profile-placeholder" style="display: none;">
                <span>{{ site.author.name | slice: 0 }}</span>
            </div>
        </div>
        
        <div class="profile-info">
            <h2 class="profile-name">Sumit Yadav</h2>
            <p class="profile-title">Research Scientist & Developer</p>
            <p class="profile-location">üìç Nepal</p>
            
            
            <p class="profile-bio">AI/ML researcher passionate about building intelligent systems and exploring the intersection of technology and human creativity.</p>
            
            
            <div class="profile-links">
                
                <a href="mailto:rockerritesh4@gmail.com" class="profile-link" title="Email">
                    üìß Email
                </a>
                
                
                
                <a href="https://github.com/rockerritesh" class="profile-link" title="GitHub" target="_blank">
                    üêô GitHub
                </a>
                
                
                
                <a href="https://linkedin.com/in/rockerritesh" class="profile-link" title="LinkedIn" target="_blank">
                    üíº LinkedIn
                </a>
                
                
                
                <a href="https://twitter.com/rocker_ritesh" class="profile-link" title="Twitter" target="_blank">
                    üê¶ Twitter
                </a>
                
                
                
                <a href="https://scholar.google.com/citations?user=ag74ytsAAAAJ&hl=en" class="profile-link" title="Google Scholar" target="_blank">
                    üéì Scholar
                </a>
                
                
                
                <a href="https://sumityadav.com.np" class="profile-link" title="Website" target="_blank">
                    üåê Website
                </a>
                
            </div>
        </div>
    </div>
    
    <div class="research-highlights">
        <h3>Research Highlights</h3>
        <div class="highlight-section">
            <h4>AI & Machine Learning</h4>
            <ul>
                <li>Large Language Models</li>
                <li>Deep Learning Systems</li>
                <li>Natural Language Processing</li>
                <li>Computer Vision</li>
            </ul>
        </div>
        
        <div class="highlight-section">
            <h4>Software Development</h4>
            <ul>
                <li>Full-Stack Development</li>
                <li>Backend Systems</li>
                <li>API Design</li>
                <li>DevOps & Cloud</li>
            </ul>
        </div>
        
        <div class="highlight-section">
            <h4>Current Focus</h4>
            <ul>
                <li>AI Agent Development</li>
                <li>Model Optimization</li>
                <li>Research & Innovation</li>
                <li>Open Source Projects</li>
            </ul>
        </div>
    </div>
    
    <!-- <div class="recent-posts">
        <h3>Recent Posts</h3>
        <ul class="sidebar-post-list">
            
        </ul>
    </div> -->
</aside>

            </div>
        </div>
    </main>
    
    <footer class="site-footer">
    <div class="wrapper">
        <div class="footer-content">
            <p>&copy; 2025 Made with ‚ù§Ô∏è | All rights reserved to <a href="https://sumityadav.com.np" target="_blank">sumityadav.com.np</a></p>
            <p>Licensed under <a href="https://github.com/rockerritesh/tatva/blob/main/LICENSE" target="_blank">Apache License 2.0</a></p>
            
                <p>Contact: <a href="mailto:rockerritesh4@gmail.com">rockerritesh4@gmail.com</a></p>
            
        </div>
    </div>
</footer> 
    
    <!-- Theme toggle functionality -->
    <script>
        (function() {
            // Get theme preference from localStorage or default to system preference
            const getThemePreference = () => {
                const stored = localStorage.getItem('theme-preference');
                if (stored) return stored;
                
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            };
            
            // Apply theme to document
            const applyTheme = (theme) => {
                const root = document.documentElement;
                root.classList.remove('light-theme', 'dark-theme');
                
                if (theme !== 'auto') {
                    root.classList.add(`${theme}-theme`);
                }
                
                // Update Mermaid theme if it exists
                if (window.mermaid) {
                    const mermaidTheme = theme === 'dark' || 
                        (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) 
                        ? 'dark' : 'default';
                    
                    mermaid.initialize({ 
                        startOnLoad: true,
                        theme: mermaidTheme,
                        themeVariables: {
                            primaryColor: theme === 'dark' ? '#4da6ff' : '#ff6b6b',
                            primaryTextColor: theme === 'dark' ? '#e0e0e0' : '#333',
                            primaryBorderColor: theme === 'dark' ? '#4da6ff' : '#ff6b6b',
                            lineColor: theme === 'dark' ? '#a0a0a0' : '#666',
                            sectionBkgColor: theme === 'dark' ? '#2a2a2a' : '#f8f9fa',
                            altSectionBkgColor: theme === 'dark' ? '#333' : '#e9ecef',
                            gridColor: theme === 'dark' ? '#333' : '#ddd',
                            tertiaryColor: theme === 'dark' ? '#2a2a2a' : '#f1f3f4'
                        }
                    });
                    
                    // Re-render existing diagrams
                    document.querySelectorAll('.mermaid').forEach(el => {
                        if (el.getAttribute('data-processed')) {
                            el.removeAttribute('data-processed');
                            el.innerHTML = el.getAttribute('data-original') || el.innerHTML;
                        }
                    });
                    mermaid.init(undefined, '.mermaid');
                }
            };
            
            // Toggle theme function
            const toggleTheme = () => {
                const currentTheme = getThemePreference();
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                localStorage.setItem('theme-preference', newTheme);
                applyTheme(newTheme);
            };
            
            // Apply theme on page load
            document.addEventListener('DOMContentLoaded', () => {
                const theme = getThemePreference();
                applyTheme(theme);
                
                // Add click event to theme toggle button
                const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', toggleTheme);
                }
                
                // Store original mermaid content for re-rendering
                document.querySelectorAll('.mermaid').forEach(el => {
                    if (!el.getAttribute('data-original')) {
                        el.setAttribute('data-original', el.innerHTML);
                    }
                });
            });
            
            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                // Only respond to system changes if user hasn't set a manual preference
                if (!localStorage.getItem('theme-preference')) {
                    applyTheme(e.matches ? 'dark' : 'light');
                }
            });
        })();
        
        // Scroll Progress Bar functionality
        (function() {
            const scrollProgressBar = document.getElementById('scroll-progress-bar');
            
            if (!scrollProgressBar) return;
            
            function updateScrollProgress() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                
                scrollProgressBar.style.height = Math.min(Math.max(scrollPercent, 0), 100) + '%';
            }
            
            // Update on scroll
            window.addEventListener('scroll', updateScrollProgress, { passive: true });
            
            // Update on resize (in case content changes)
            window.addEventListener('resize', updateScrollProgress, { passive: true });
            
            // Initial update
            updateScrollProgress();
        })();
    </script>
</body>
</html> 